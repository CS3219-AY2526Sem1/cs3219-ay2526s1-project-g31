"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.collaborationRouter = void 0;
const express_1 = require("express");
const jwt_1 = require("../middleware/jwt");
const proxy_1 = require("../middleware/proxy");
const shared_1 = require("shared");
const collaborationRouter = (0, express_1.Router)();
exports.collaborationRouter = collaborationRouter;
const COLLABORATION_SERVICE_URL = process.env.COLLABORATION_SERVICE_BASE_URL;
collaborationRouter.post("/api/roomSetup/me", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.get("/api/roomSetup/users/:userId/:matchedUserId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.post("/api/roomSetup/join/:roomId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.post("/api/roomSetup/room/:userId/:matchedUserId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.post("/api/roomSetup/close/:roomId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.post("/api/roomSetup/cancel/:roomId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.post("/api/roomSetup/clear/:roomId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.get("/api/roomSetup/codespace/:roomId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.post("/api/roomSetup/message/:roomId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.post("/api/roomSetup/ai-message/:roomId", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL));
collaborationRouter.use("/socket/collaboration", (0, proxy_1.proxyMiddleware)(COLLABORATION_SERVICE_URL, "/socket/collaboration", true));
