"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.aiRouter = void 0;
const express_1 = require("express");
const jwt_1 = require("../middleware/jwt");
const proxy_1 = require("../middleware/proxy");
const shared_1 = require("shared");
const aiRouter = (0, express_1.Router)();
exports.aiRouter = aiRouter;
const AI_SERVICE_URL = process.env.AI_SERVICE_BASE_URL;
aiRouter.post("/api/ai/explain", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.httpProxy)(AI_SERVICE_URL));
aiRouter.post("/api/ai/hint", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.httpProxy)(AI_SERVICE_URL));
aiRouter.post("/api/ai/suggest", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.httpProxy)(AI_SERVICE_URL));
aiRouter.post("/api/ai/testcases", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.httpProxy)(AI_SERVICE_URL));
aiRouter.post("/api/ai/debug", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.httpProxy)(AI_SERVICE_URL));
aiRouter.post("/api/ai/refactor", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.httpProxy)(AI_SERVICE_URL));
aiRouter.post("/api/ai/clear", jwt_1.verifyAccessToken, (0, jwt_1.authorizedRoles)([shared_1.UserRole.USER, shared_1.UserRole.ADMIN]), jwt_1.attachUserFromJwt, (0, proxy_1.httpProxy)(AI_SERVICE_URL));
